<div fxLayout="column" fxLayoutAlign="center">
  <div fxLayoutAlign="center center">
    <mat-form-field fxFlex="40%">
      <input
        matInput
        type="text"
        (keyup)="doFilter($event.target.value)"
        placeholder="Filter"
      />
    </mat-form-field>
  </div>
  <mat-table [dataSource]="dataSource" #updateBooking matSort>
    <!-- <ng-container matColumnDef="id">
      <mat-header-cell *matHeaderCellDef>Id</mat-header-cell>
      <mat-cell *matCellDef="let booking">{{ booking.id }}</mat-cell>
    </ng-container> -->

    <ng-container matColumnDef="name">
      <mat-header-cell *matHeaderCellDef mat-sort-header>Name</mat-header-cell>
      <mat-cell *matCellDef="let booking"
        >{{ !editState ? booking.name : "" }}

        <mat-form-field *ngIf="editState && bookingToEdit.id == booking.id">
          <input
            type="text"
            matInput
            placeholder="Name"
            [(ngModel)]="booking.name"
            name="name"
            #form
          />
        </mat-form-field>
      </mat-cell>
    </ng-container>
    <ng-container matColumnDef="lastName">
      <mat-header-cell *matHeaderCellDef>Last Name</mat-header-cell>
      <mat-cell *matCellDef="let booking">{{ booking.lastName }}</mat-cell>
    </ng-container>
    <ng-container matColumnDef="date">
      <mat-header-cell *matHeaderCellDef mat-sort-header>Date</mat-header-cell>
      <mat-cell *matCellDef="let booking">{{
        booking.date.toDate() | date
      }}</mat-cell>
    </ng-container>
    <ng-container matColumnDef="time">
      <mat-header-cell *matHeaderCellDef>Time</mat-header-cell>
      <mat-cell *matCellDef="let booking">{{ booking.time }}</mat-cell>
    </ng-container>
    <ng-container matColumnDef="hour">
      <mat-header-cell *matHeaderCellDef>Hour(s)</mat-header-cell>
      <mat-cell *matCellDef="let booking">{{ booking.hours }}</mat-cell>
    </ng-container>
    <ng-container matColumnDef="amount">
      <mat-header-cell *matHeaderCellDef>Amount</mat-header-cell>
      <mat-cell *matCellDef="let booking"
        ><span matPrefix>$ &nbsp;</span>{{ booking.amount | number }}</mat-cell
      >
    </ng-container>
    <ng-container matColumnDef="actions">
      <mat-header-cell *matHeaderCellDef>Actions</mat-header-cell>
      <mat-cell *matCellDef="let booking">
        <button
          (click)="onDeleteBooking(booking)"
          type="{{ !editState ? 'button' : 'submit' }}"
        >
          <mat-icon aria-hidden="false" aria-label="delete icon" color="warn"
            >delete_outline</mat-icon
          >
        </button>
        <a routerLink="../booking/{{ booking.id }}">
          <mat-icon aria-hidden="false" aria-label="edit icon" color="warn">
            edit_outline</mat-icon
          ></a
        >
        <!-- <button (click)="onEditBooking($event, booking)" type="button">
          <mat-icon aria-hidden="false" aria-label="edit icon" color="warn">{{
            !editState ? "edit_outline" : "clear_outline"
          }}</mat-icon>
        </button> -->
        <!-- <button type="submit" (click)="onUpdateBooking()">
          <mat-icon aria-hidden="false" aria-label="edit icon" color="warn"
            >save_outline</mat-icon
          >
        </button> -->
      </mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
  </mat-table>
</div>

<!-- [formControl]="getControl(booking.id, 'name')" -->
<!-- <ng-template #noBookings>
  <h5>There are not booking to list</h5>
</ng-template>
<h3>Testing {{ timestamp | date }}</h3>
<div *ngFor="let item of testBooking">
  <li>{{ item.date.toDate() | date }}</li>
</div> -->
